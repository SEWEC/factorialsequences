<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>a(n) = largest m such that m! divides n</title>
</head>
<style>
    #output-sequence{
        overflow: scroll;
    }
</style>
<body>
    <h1>The asymptotic mean of a(n) = largest m such that m! divides n</h1>
    <label for="array-size">Generate sequence of length: </label>
    <input id="array-size" type="number">
    <input id="submit" type="submit" value="Submit">
    <div id="output">
        <div id="output-mean">
        </div>
        <div id="output-sequence">
        </div>
    </div>
    <br>
    <h2>
        Semi-visual, semi-proof that the mean plus 1 approaches e:
    </h2>
    <p>
        mean( ∑ 1, 2, 1, 2, 1, 3, 1, 2, 1, 2, 1, 3, 1, 2, 1, 2, 1, 3, 1, 2, 1, 2, 1, 4 ... ) + 1
        <br>
        =
        <br>
        mean( ∑ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ... ) // = 1 / 1!
        <br>
        +
        <br>
        mean( ∑ 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1 ... ) // = 1 / 2! 
        <br>
        +
        <br>
        mean( ∑ 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1 ... ) // = 1 / 3! 
        <br>
        +
        <br>
        mean( ∑ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 ... ) // = 1 / 4!
        <br>
        +
        <br>
        ...
        <br>
        +
        <br>
        1/ 0!
        <br>
        =
        <br>
        ∑ 1 / n! from n = 0 to ∞
        <br>
        = 
        <br>
        e
    </p>
    <h2>
        Consider the sequence b(n) = a(n) mod 2
    </h2>
    <p>
        mean( ∑ b(n))
        <br>
        =
        <br>
        mean( ∑ 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0... )
        <br>
        =
        <br>
        mean( ∑ 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1... ) // = 1 / 1!
        <br>
        -
        <br>
        mean( ∑ 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1... ) // = 1 / 2! 
        <br>
        +
        <br>
        mean( ∑ 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0... ) // = 1 / 3!
        <br>
        -
        <br>
        mean( ∑ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0... ) // = 1 / 4!
        <br>
        +
        <br>
        ...
        <br>
        =
        <br>
        1 - ∑ (-1)^n / n! from n = 0 to ∞
        <br>
        = 
        <br>
        1 - e^-1
        <br>
        = 
        <br>
        1 - 1 / e
    </p>
</body>
<script>
    function mSuchThatMFacDividesN(numArg) {
        let n = numArg;
        let m = 2;
        while (n % m === 0) {
            n /= m;
            m += 1;
        }
        return m - 1;
    }

    const submit  = document.getElementById("submit");

    const arraySizeInput  = document.getElementById("array-size");

    const outputMean  = document.getElementById("output-mean");

    const outputSequence  = document.getElementById("output-sequence");

    submit.addEventListener('click', () => {
        const inputValue = arraySizeInput.value;

        const arraySize = Number.parseInt(inputValue)

        const naturalArr = Array(arraySize).fill(0).map((_x, i) => i + 1);

        const mSequenceArr = naturalArr.map((n) => mSuchThatMFacDividesN(n));

        const sequenceSum = mSequenceArr.reduce((sum, m) => sum + m);

        const outputMeanP = document.createElement('p');
        outputMeanP.innerHTML = "Sequence mean plus one: " + (sequenceSum / arraySize + 1);
        outputMean.appendChild(outputMeanP);

        const outputSequenceP = document.createElement('p');
        outputSequenceP.innerHTML = mSequenceArr.join(', ');
        outputSequence.innerHTML = '';

        outputSequence.appendChild(outputSequenceP);
    });
</script>
</html>